# Ca65 - Dream Tracker

[Dream Tracker](https://www.dreamtracker.org/) is a application written in `Ca65` by Tim Soderstrom. It is a excellent '[Tracker](https://en.wikipedia.org/wiki/Music_tracker)' which runs on the Commander X16.

BitMagic can debug the application by using the `.o` file generated by `Ca65` in combination with the `.cfg` file used. The object file (`.o`) must be created as this contains the binary to source map that is required by BitMagic.

BitMagic cannot build a `Ca65` application, so this must be done separately. There are also other system specific changes that will need to be made to the `project.json` file, especially the location of the `x16.inc` file within cc65 lib folder.

For simplicity there is a task included in the project to build Dream Tracker. The reader will need to modify this and the `project.json` file for their system to get the example to work.

## Rom Version

Currently Dream Tracker requires a R47 rom. This can automatically be downloaded in BitMagic's VSCode settings.

## Building

Dream Tracker has a makefile, so you will need to set up your system to be able to use this.

It will also need a install of `cc65`.

You can use VSCodes [Tasks](https://code.visualstudio.com/docs/editor/tasks) to start the build as a pre-requisite to launching the debugger.

## Project File

The `project.json` file will need to be altered to point to your copy of `cc65`.

The `includes` setting on the file definition needs to point to the `lib` folder in your local `cc65` install. It needs this as this is the location of library files could be imported from your code. The most common being the header sections.

If you're running on Linux you may also need to change the paths elsewhere in the file as necessary.

## Extension Activation

There is empty file `blank.bmasm` which is included to activate the BitMagic extension.

You will need to open the file to activate the extension.

Without this you will need to activate the extension manually by selecting it via the Language Mode button in the status bar.

## Debugging

You will not be able to set breakpoints on the `.asm` files by default. To enable this you must tell VSCode that these files are 'BitMagic' files. Sadly this will effect your formatting, but there doesn't appear to be a way to coerce VSCode into enabling this functionality any other way.
